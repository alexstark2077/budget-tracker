"use strict";const budgetForm=document.querySelector(".budget__form--budget"),expensesForm=document.querySelector(".budget__form--expenses"),expensesFormBtn=document.querySelector(".budget__form--expenses .budget__form-btn"),expensesFormTitle=document.querySelector(".budget__form--expenses .budget__form-title"),budgetInput=document.querySelector(".budget__form-input--budget"),expenseNameInput=document.querySelector(".budget__form-input--expense-name"),expenseAmountInput=document.querySelector(".budget__form-input--expense-amount"),changeCurrencyBtn=document.querySelector(".budget__form-btn--currency"),resetAllBtn=document.querySelector(".budget__form-btn--reset-all"),budgetBox=document.querySelector(".budget__info-box--budget"),expensesBox=document.querySelector(".budget__info-box--expenses"),expensesContainer=document.querySelector(".budget__info-expenses"),Logic=new App,Visual=new Visuals;function handleEvents(){Visual.handleBudgetFormClick(reactToBudgetFormClick),Visual.handleChangeCurrencyBtn(reactToChangeCurrencyBtn),Visual.handleResetAllBtnClick(reactToResetAllBtnClick),Visual.handleFormSubmit(reactToFormSubmit),Visual.handleExpenseItemClicks(reactToExpenseItemClicks),Visual.handleExpenseItemHoverIn(),Visual.handleExpenseItemHoverOut()}function start(){Visual.showStats(Logic.getState()),Visual.showExpenses(Logic.getState().expenses,Logic.getState().currency),document.querySelector(".budget__info-indicator").dataset.percentage=Logic.calcIndicatorPercentage(Logic.getState().currentAmountOfExpenses,Logic.getState().currentBudget),Visual.showIndicatorPercentage(Logic.calcIndicatorPercentage(Logic.getState().currentAmountOfExpenses,Logic.getState().currentBudget)),Logic.weeklyRefresh()}function reactToBudgetFormClick(e){const t=Logic.setCurrentBudget(e);!1!==t?(Visual.showBudget(t,Logic.getState().currency),updateIndicator()):Visual.renderError("The input must be a number above zero!")}function reactToChangeCurrencyBtn(){Logic.newCurrency=prompt("Enter 3 characters max").toUpperCase(),!1!==Logic.setNewCurrency()?(Logic.saveLocally(),Visual.changeCurrency(Logic.getState())):Visual.renderError("WRONG: 3 characters max!!! Speak English, yes?")}function reactToResetAllBtnClick(e){Logic.resetAll(e)}function updateIndicator(){Visual.showIndicatorPercentage(Logic.calcIndicatorPercentage(Logic.getState().currentAmountOfExpenses,Logic.getState().currentBudget)),document.querySelector(".budget__info-indicator").dataset.percentage=Logic.calcIndicatorPercentage(Logic.getState().currentAmountOfExpenses,Logic.getState().currentBudget)}function reactToFormSubmit(e){Logic.checkExpenseInput(expenseNameInput.value,expenseAmountInput.value)?("adding"===e&&(Logic.createExpense([expenseNameInput.value,+expenseAmountInput.value,new Date]),Logic.modifyExpenses(+expenseAmountInput.value,"plus"),Visual.showStats(Logic.getState()),Logic.saveLocally(),Visual.resetInputs(),expenseNameInput.focus(),Visual.showExpenses(Logic.getState().expenses,Logic.getState().currency),updateIndicator()),"editing"===e&&(Logic.modifyExpenses(Logic.editingItemAmount,"minus"),Logic.getState().expenses[Logic.editingItemIndex][0]=expenseNameInput.value,Logic.getState().expenses[Logic.editingItemIndex][1]=+expenseAmountInput.value,Logic.modifyExpenses(+expenseAmountInput.value,"plus"),Visual.showStats(Logic.getState()),Logic.saveLocally(),Visual.exitEditing(Logic.editingItemIndex,Logic.getState().currency),updateIndicator())):Visual.renderError("the form was filled in incorrectly")}function reactToExpenseItemClicks(e){const t=e.closest(".budget__expense"),n=+e.closest(".budget__expense").dataset.date,o=Logic.getState().expenses.findIndex((e=>new Date(e[2]).getTime()===n)),c=Logic.getState().expenses[o][1];if(e.classList.contains("budget__expense-button--edit")){const e=t.querySelector(".budget__expense-name").innerText;Logic.editingItemIndex=o,Logic.editingItemAmount=c,Visual.toggleEditForm(e,c)}e.classList.contains("budget__expense-button--delete")&&(Logic.getState().expenses.splice(o,1),Logic.modifyExpenses(c,"minus"),Logic.saveLocally(),Visual.showStats(Logic.getState()),updateIndicator(),t.remove())}handleEvents(),start();